<!DOCTYPE html>

<html lang="en">
<head>
<meta content="HTML Tidy for HTML5 for Linux version 5.8.0" name="generator"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>
      Conversations avec le documentaliste scientifique CIRED.digital - VERSION ALPHA
    </title>
<script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-gray-50">
<div class="flex flex-col h-screen" id="app">
<!-- Header -->
<div class="bg-white border-b border-gray-200 px-4 py-3 shadow-sm">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-3">
<div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
<span class="text-white font-bold text-lg">ü§ñ</span>
</div>
<div>
<h1 class="text-lg font-semibold text-gray-900">
                Conversations avec CIRED.digital, documentaliste scientifique  - VERSION ALPHA
              </h1>
<p class="text-sm text-gray-500" id="status-text">
                Connect√© √† <span id="api-url-display">http://cired.digital:7272</span> ‚Ä¢ <span id="model-display">openai/gpt-4o-mini</span>
</p>
</div>
</div><button class="px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors" id="config-btn">Config</button>
<button class="px-3 py-2 text-sm font-medium text-blue-700 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors ml-2 hidden" id="profile-btn">üë§ Profil</button>
</div>
</div>
<!-- Profile Banner (Test Phase) -->
<div class="bg-blue-50 border-b border-blue-200 px-4 py-2 text-sm text-blue-800 hidden" id="profile-banner">
  <div class="flex items-center justify-between">
    <span>üß™ <strong>Phase de test :</strong> Aidez-nous √† am√©liorer le service en renseignant votre profil</span>
    <button class="text-blue-600 hover:text-blue-800 underline" id="fill-profile-btn">Remplir mon profil</button>
  </div>
</div>
<!-- Configuration Panel -->
<div class="bg-white border-b border-gray-200 p-4 hidden" id="config-panel">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">R2R API URL</label> <input class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="api-url" type="text"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Model</label> <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="model">
<option value="openai/gpt-4.1-mini">
                GPT-4.1 Mini
              </option>
<option value="deepseek/deepseek-chat">
                Deepseek chat
              </option>
<option value="mistral/open-mistral-7b">
                Open mistral 7b
              </option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Temperature</label> <input class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="temperature" max="2" min="0" step="0.1" type="number" value="0.1"/>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Max Tokens</label> <input class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="max-tokens" max="4000" min="100" step="100" type="number" value="1000"/>
</div>
</div>
  <div class="mt-4 flex space-x-4">
    <div class="flex-1 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
      <label class="flex items-center text-sm">
        <input type="checkbox" id="privacy-mode" class="mr-2">
        <span class="text-yellow-800">
          <strong>Mode sans trace</strong> - Aucun enregistrement des conversations
        </span>
      </label>
    </div>
  <div class="flex-1 p-3 bg-blue-50 border border-blue-200 rounded-lg">
    <label class="flex items-center text-sm">
      <input type="checkbox" id="debug-mode" class="mr-2">
      <span class="text-blue-800">
        <strong>Debug Mode</strong> ‚Äì Afficher les logs de r√©ponse dans la console
      </span>
    </label>
  </div>
  </div>
</div>

<!-- Profile Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50" id="profile-modal">
  <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">Profil utilisateur</h2>
    <form id="profile-form">
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Profession</label>
          <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="profession" required>
            <option value="">S√©lectionnez...</option>
            <option value="√©tudiant/stagiaire">√âtudiant/Stagiaire</option>
            <option value="doctorant">Doctorant</option>
            <option value="ITA">ITA</option>
            <option value="enseignant/chercheur">Enseignant/Chercheur</option>
            <option value="journaliste/√©crivain">Journaliste/√âcrivain</option>
            <option value="autre">Autre</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Domaine d'expertise</label>
          <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="domaine" required>
            <option value="">S√©lectionnez...</option>
            <option value="environnement/d√©veloppement">Environnement/D√©veloppement</option>
            <option value="communication/m√©diation">Communication/M√©diation</option>
            <option value="informatique">Informatique</option>
            <option value="autre">Autre</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Affiliation</label>
          <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="affiliation" required>
            <option value="">S√©lectionnez...</option>
            <option value="CIRED">CIRED</option>
            <option value="ParisTech">ParisTech</option>
            <option value="CNRS">CNRS</option>
            <option value="√©tablissement d'enseignement sup√©rieur ou de recherche">√âtablissement d'enseignement sup√©rieur ou de recherche</option>
            <option value="entreprise">Entreprise</option>
            <option value="m√©dia">M√©dia</option>
            <option value="ind√©pendant">Ind√©pendant</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Anciennet√© dans le poste</label>
          <select class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" id="anciennete" required>
            <option value="">S√©lectionnez...</option>
            <option value="des semaines">Des semaines</option>
            <option value="des mois">Des mois</option>
            <option value="des ann√©es">Des ann√©es</option>
          </select>
        </div>
        <div class="flex items-center">
          <input type="checkbox" id="profile-consent" class="mr-2" required>
          <label for="profile-consent" class="text-sm text-gray-700">
            J'accepte que mes donn√©es de profil soient stock√©es pour am√©liorer le service
          </label>
        </div>
      </div>
      <div class="flex justify-end space-x-3 mt-6">
        <button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200" id="profile-cancel">Annuler</button>
        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">Enregistrer</button>
      </div>
    </form>
  </div>
</div>

<!-- Messages -->
<div class="flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth" id="messages-container">
<div class="flex justify-start">
<div class="flex max-w-3xl">
<div class="flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 text-gray-600 mr-3 flex items-center justify-center">
<span class="font-bold text-lg">ü§ñ</span>
</div>
<div class="flex-1">
<div class="bg-white text-gray-800 border border-gray-200 px-4 py-3 rounded-lg">
<div class="message-content">Bonjour !<br/>Je suis CIRED.digital, documentaliste scientifique. J'analyse les √©crits du Centre International de Recherche sur l'Environnement et le D√©veloppement (le CIRED) pour vous fournir des micro-synth√®ses sourc√©es. Le fonds documentaire compte plus de 1000 documents consultables sur l'archive ouverte Hyper Articles en Ligne (HAL).<br />Vous pourrez donner un feedback en cliquant üëç ou üëé sous chaque r√©ponse.
<br/><br/>
‚ö†Ô∏è <strong>Les conversations sont enregistr√©es pour am√©liorer le service.</strong><br/>
üìä <a href="#" id="view-analytics-link" class="text-blue-600 hover:text-blue-800">Voir les donn√©es collect√©es</a> |
üîí <a href="#" id="privacy-policy-link" class="text-blue-600 hover:text-blue-800">Politique de confidentialit√©</a>

                  <img alt="Nuage de mots repr√©sentant les principales th√©matiques de recherche CIRED : changement climatique, transition √©nerg√©tique, politique climatique, mod√©lisation √©conomique, √©nergies renouvelables, d√©veloppement durable, et politiques environnementales" class="w-full h-auto max-w-full rounded-lg shadow-sm" src="static/cired_wordcloud.png" style="max-height: 300px; object-fit: contain;"/>
</div>
</div>
<div class="text-xs text-gray-500 mt-1" id="initial-timestamp"></div>
</div>
</div>
</div>
</div><!-- Error Display -->
<div class="mx-4 mb-2 p-3 bg-red-50 border border-red-200 rounded-lg items-center text-red-800 hidden" id="error-container">
<span class="mr-2">‚ö†Ô∏è</span> <span class="text-sm" id="error-text"></span>
</div><!-- Input -->
<div class="bg-white border-t border-gray-200 p-4">
<div class="flex space-x-3 max-w-4xl mx-auto">
<div class="flex-1 relative">
<textarea class="w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="message-input" placeholder="Posez votre question sur les th√®mes du CIRED..." rows="1" style="min-height: 48px; max-height: 120px;"></textarea>
</div><button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors" id="send-btn"><span class="font-bold text-lg">‚û§</span></button>
</div>
<div class="text-center mt-2">
<span class="text-xs text-gray-500">Appuyez sur Entr√©e pour envoyer, Maj+Entr√©e pour une nouvelle ligne</span>
</div>
</div>
</div>

<script src="config.js"></script>
<script src="messages.js"></script>
<script src="citations.js"></script>
<script src="tooltips.js"></script>
<script src="api.js"></script>
</body>
</html>
