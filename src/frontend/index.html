<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Cirdi - Assistant documentaire scientifique du CIRED</title>
  <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/pure-min.css">
  <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/grids-responsive-min.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>
  <link rel="stylesheet" href="main.css">
</head>

<body>

<!-- Configuration button -->
<span>
    <button class="config-button" id="config-btn">âš™ï¸</button>
</span>

<!-- Configuration Panel -->
<div class="config-panel hidden" id="config-panel">

    <div class="config-header">
        <button id="config-close-btn" class="config-close-button">âœ–ï¸</button>
        <h2 class="config-title">Cirdi settings</h2>
    </div>

<div class="settings-grid" id="settings-container">

<div class="form-group">
  <div class="label-with-status">
    <label class="form-label">
      Server URL
      <span class="help-icon" title="Where to find the R2R API endpoint. Try http://cired.digital:7272">â„¹ï¸</span>
    </label>
    <div class="status-text" id="api-status">Status: OK</div>
  </div>
  <input class="form-input" id="api-url" type="text"/>
</div>

<div class="form-group">
  <label class="form-label">
  Language model
  <span class="help-icon" title="The LLM used to generate replies. Commercial options disabled for cost control.">â„¹ï¸</span>
  </label>
  <select class="form-select" id="model">
    <option value="ollama/mistral-small:24b-3.1-instruct-2503-q8_0">Mistral small on CNRS servers</option>
    <option value="ollama/mistral-large:latest">Mistral large on CNRS servers</option>
    <option value="ollama/qwen3:32b">Qwen 3 32B on CNRS servers</option>
    <option value="deepseek/deepseek-chat">Deepseek chat at Deepseek</option>
    <!--option value="deepseek/deepseek-reasoner">Deepseek reasoner at Deepseek</option-->
    <option value="mistral/mistral-small-latest">Mistral small latest at Mistral</option>
    <!--option value="mistral/mistral-medium-latest">Mistral medium latest at Mistral</option-->
    <option value="anthropic/claude-3-5-haiku-latest">Claude Haiku 3.5 latest at Anthropic</option>
    <!--option value="anthropic/claude-sonnet-4-20250514" disabled>Claude Sonnet 2025-05-14 at Anthropic</option-->
    <option value="openai/gpt-4o-mini" selected>GPT-4o mini at OpenAI</option>
    <!--option value="openai/gpt-4.1-mini" disabled>GPT-4.1 Mini at OpenAI</option-->
  </select>
</div>

<div class="form-group">
  <label class="form-label">
  Response variability
  <span class="help-icon" title="Temperature parameter. Options: 0 / 0.2 / 0.4 / 0.8 / 1.6.">â„¹ï¸</span>
  </label>
  <select class="form-select" id="temperature">
    <option value="0">Repeatable answers</option>
    <option value="0.2" selected>Precise (default)</option>
    <option value="0.4">Analytical</option>
    <option value="0.8">Exploratory</option>
    <option value="1.6">Creative</option>
  </select>
</div>

<div class="form-group">
  <label class="form-label">
    Response length
    <span class="help-icon" title="Max tokens parameter. Options: 512, 2048, 4096, 8192 (disabled for cost control).">â„¹ï¸</span>
  </label>
  <select class="form-select" id="max-tokens">
    <option value="512">Concise (default)</option>
    <option value="2048">Detailled</option>
    <option value="4096">Long</option>
    <option value="8192" disabled>Oversized</option>
  </select>
</div>


<div class="checkbox-container privacy-container">
  <label class="checkbox-label">
    <input type="checkbox" id="privacy-mode" class="checkbox-input">
    <span class="privacy-text"><strong>Privacy Mode</strong> â€“ No logging</span>
   </label>
</div>

<div class="checkbox-container debug-container">
  <label class="checkbox-label">
    <input type="checkbox" id="debug-mode" class="checkbox-input">
    <span class="debug-text"><strong>Debug Mode</strong> â€“ Show response logs in console</span>
  </label>
</div>

</div> <!-- id="settings-container"-->
</div> <!-- id="config-panel"-->

<!-- Greeting Message -->

<div id="messages-container" class="messages-container">
    <div class="message-wrapper" id="message-1">
        <div class="message-content-wrapper">
            <div class="avatar">
                <span class="avatar-text">ğŸ¤–</span>
            </div>
            <div class="message-bubble">
                <div class="message-text">
                    <div class="message-content">
                      Bonjour !<br />
                      Je suis <strong>Cirdi</strong>, votre documentaliste scientifique spÃ©cialisÃ©. Je maÃ®trise les travaux du Centre International de Recherche sur l'Environnement et le DÃ©veloppement (CIRED) et je peux les analyser pour vous proposer des synthÃ¨ses prÃ©cises â€“ avec les liens directs en accÃ¨s libre sur HAL pour en savoir plus ğŸ˜‰.<br />
                    </div>
                </div>
                <div class="citations-container"></div>
            </div>
        </div>
    </div>
</div> <!-- id="messages-container" -->

<!-- Wrapper central qui centre verticalement l'input et l'erreur -->
<div class="vertical-centering" id="vertical-centering">

  <!-- Error Display -->
  <div class="error-container" id="error-container">
    <span class="error-icon">âš ï¸</span> <span class="error-text" id="error-text"></span>
  </div>

  <!-- Input -->
  <div class="input-section" id="input-container">
    <div class="input-wrapper">
    <textarea
      class="message-textarea"
      id="message-input"
      placeholder="Que disent les Ã©crits du CIRED sur..."
      rows="1"
      ></textarea>
    <button
      class="send-button"
      id="send-btn"
      >
      <span class="send-icon">â¤</span>
    </button>
    </div>
    <div class="input-help">
      <p>Cirdi parle franÃ§ais et + de 100 langues: Cirdi speaks English â€“ Hablo espaÃ±ol â€“ Ğ¯ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸ â€“ æˆ‘ä¼šè¯´ä¸­æ–‡ â€“ Ø£Ù†Ø§ Ø£ØªÙƒÙ„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.</p>
      <p>Appuyez sur EntrÃ©e pour envoyer, Maj+EntrÃ©e pour une nouvelle ligne.</p>
    </div>
  </div> <!-- id="input-container" -->

</div> <!-- id="vertical-centering" -->

<footer class="footer">
    <div class="footer-content">
    <p class="expertise-text">
      <strong>Domaines d'expertise</strong> : Cirdi a indexÃ© 1199 publications du CIRED
    </p>
    <img
      alt="Nuage de mots reprÃ©sentant les principales thÃ©matiques de recherche CIRED : changement climatique, transition Ã©nergÃ©tique, politique climatique, modÃ©lisation Ã©conomique, Ã©nergies renouvelables, dÃ©veloppement durable, et politiques environnementales"
      class="wordcloud-image"
      src="static/cired_wordcloud.png"
    />
    </div>
âš ï¸ <strong>Les conversations sont enregistrÃ©es pour amÃ©liorer le service.</strong>
Vous pourrez donner un feedback en cliquant ğŸ‘ ou ğŸ‘ sous la rÃ©ponse.<br />
ğŸ“Š <a href="#" id="view-analytics-link" class="footer-link">Voir les donnÃ©es collectÃ©es</a> |
ğŸ”’ <a href="#" id="privacy-policy-link" class="footer-link">Politique de confidentialitÃ©</a>
</footer>

<script src="config.js"></script>
<script src="messages.js"></script>
<script src="citations.js"></script>
<script src="tooltips.js"></script>
<script src="api.js"></script>
</body>
</html>
