<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Cirdi - Assistant documentaire scientifique du CIRED</title>
  <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/pure-min.css">
  <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/grids-responsive-min.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>
  <link rel="stylesheet" href="main.css">
</head>

<body>

<header>
  <button id="config-btn">âš™ï¸</button>
    <div id="input-container">
      <div id="input">
        <textarea
          id="user-input"
          placeholder="Cirdi, que disent les Ã©crits du CIRED sur..."
          rows="2"
          ></textarea>
        <button id="send-btn">
          â¤
        </button>
      </div>
      <div id="input-help">
        <p>Cirdi parle franÃ§ais et + de 100 langues: Cirdi speaks English â€“ Hablo espaÃ±ol â€“ Ğ¯ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸ â€“ æˆ‘ä¼šè¯´ä¸­æ–‡ â€“ Ø£Ù†Ø§ Ø£ØªÙƒÙ„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.</p>
        <p>Appuyez sur EntrÃ©e pour envoyer, Maj+EntrÃ©e pour une nouvelle ligne.</p>
      </div>
    </div> <!-- id="input-container" -->
</header>

<main>
  <div id="error-container" hidden>
    <span id="error-icon">âš ï¸</span><span id="error-text"></span>
  </div>
  <div id="messages-container">
    <div id="greeting">
      Bonjour !<br /><br />
      Je suis <strong>Cirdi</strong>, votre documentaliste scientifique. Je dispose des travaux du Centre International de Recherche sur l'Environnement et le DÃ©veloppement (CIRED) sur les thÃ¨mes ci dessous. Je vais les analyser afin de vous proposer une synthÃ¨se avec liens directs en accÃ¨s libre sur HAL pour en savoir plus ğŸ˜‰.<br />
      <div id="legend">
        <strong>Domaines d'expertise</strong> : Cirdi a indexÃ© 1199 publications du CIRED
      </div>
      <img
        alt="Nuage de mots reprÃ©sentant les principales thÃ©matiques de recherche CIRED : changement climatique, transition Ã©nergÃ©tique, politique climatique, modÃ©lisation Ã©conomique, Ã©nergies renouvelables, dÃ©veloppement durable, et politiques environnementales"
        src="static/cired_wordcloud.png"
      />
    </div> <!-- id="greeting" -->
  </div> <!-- id="messages-container" -->
</main>

<footer>
    âš ï¸ <strong>Les conversations sont enregistrÃ©es pour amÃ©liorer le service.</strong>
    Vous pourrez donner un feedback en cliquant ğŸ‘ ou ğŸ‘ sous la rÃ©ponse.<br />
    ğŸ“Š <a href="#" id="view-analytics-link">Voir les donnÃ©es collectÃ©es</a> |
    ğŸ”’ <a href="#" id="privacy-policy-link">Politique de confidentialitÃ©</a>
</footer>


<!-- Configuration Panel -->
<aside class="hidden" id="config-panel">

  <div id="config-header">
    <button id="config-close-btn">âœ–ï¸</button>
    <h2>Cirdi settings</h2>
  </div>

  <div class="settings-grid" id="settings-container">

    <div class="form-group">
      <div class="label-with-status">
        <label class="form-label">
          Server URL
          <span class="help-icon" title="Where to find the R2R API endpoint. Try http://cired.digital:7272">â„¹ï¸</span>
        </label>
        <div class="status-text" id="api-status">Status: OK</div>
      </div>
      <input class="form-input" id="api-url" type="text"/>
    </div>

    <div class="form-group">
      <label class="form-label">
      Language model
      <span class="help-icon" title="The LLM used to generate replies. Commercial options disabled for cost control.">â„¹ï¸</span>
      </label>
      <select class="form-select" id="model">
        <option>Chargement...</option>
      </select>
    </div>

    <div class="form-group">
      <label class="form-label">
        Temperature (response creativity)
        <span class="help-icon" title="Automatically set to model provider's recommendations.">â„¹ï¸</span>
      </label>
      <input type="number" id="temperature" class="form-input" step="0.05"/>
    </div>

    <div class="form-group">
      <label class="form-label">
        Max tokens (response length)
        <span class="help-icon" title="Automatically set according to the model.">â„¹ï¸</span>
      </label>
      <input type="number" id="max-tokens" class="form-input" step="100"/>
    </div>

    <div class="form-group">
      <label class="form-label">
        Nombre maximum de segments Ã  rÃ©cupÃ©rer
        <span class="help-icon" title="Entre 1 et 1000.">â„¹ï¸</span>
      </label>
      <input type="number" id="chunk-limit" class="form-input" step="1"/>
    </div>

    <div class="form-group">
      <label class="form-label">
        MÃ©thode pour pÃªcher les segments
        <span class="help-icon" title="Options: vanilla (recherche directe rapide - pour question prÃ©cise), rag_fusion (reformule - pour question ambigÃ¼e), HyDE (prÃªche le faux pour pÃªcher le vrai - pour question ouverte, conceptuelle)">â„¹ï¸</span>
      </label>
      <select id="search-strategy" class="form-select">
        <option value="vanilla">Vanilla</option>
        <option value="rag_fusion">RAG Fusion</option>
        <option value="hyde" selected>Hyde</option>
      </select>
    </div>

    <div class="checkbox-container web-search-container">
      <label class="checkbox-label">
        <input type="checkbox" id="include-web-search" class="checkbox-input"  disabled>
        <span class="web-search-text"><strong>Recherche Web</strong> â€“ Inclure les rÃ©sultats web (0.1 cent par question)</span>
      </label>
    </div>

    <div class="checkbox-container privacy-container">
      <label class="checkbox-label">
        <input type="checkbox" id="privacy-mode" class="checkbox-input">
        <span class="privacy-text"><strong>Privacy Mode</strong> â€“ No logging</span>
      </label>
    </div>

    <div class="checkbox-container debug-container">
      <label class="checkbox-label">
        <input type="checkbox" id="debug-mode" class="checkbox-input">
        <span class="debug-text"><strong>Debug Mode</strong> â€“ Show response logs in console</span>
      </label>
    </div>

  </div> <!-- id="settings-container"-->
</aside>


<script src="settings.js"></script>
<script src="config.js"></script>
<script src="messages.js"></script>
<script src="citations.js"></script>
<script src="tooltips.js"></script>
<script src="api.js"></script>
</body>
</html>
